function isYES(a){if(a=="no"||a==""){return false}else{return true}}var LyricsPlayer=function(){$al=$("#anthem_lyrics div");var a=new Array();$al.each(function(d){var c=parseFloat($(this).attr("id").substr(2));if(c>0){var b=$(this).text();a.push({time:c,lyrics:b})}});this.lyrics=a};LyricsPlayer.prototype={audioTag:function(a){if(typeof a.addEventListener=="function"){a.addEventListener("timeupdate",this.timeupdate,true)}},timeupdate:function(b){var a=b.target.currentTime;lyricsPlayer.display(a)},flash:function(){this.flash=document.getElementById("anthem");if(typeof this.flash!="undefined"){setInterval("lyricsPlayer.interval();",250)}},interval:function(){if(typeof this.flash.GetVariable=="function"){var a=this.flash.GetVariable("songPosition")/1000;this.display(a)}},display:function(c){if(typeof this.displayer=="undefined"){this.displayer=document.createElement("div");var e=$(this.displayer);var b=$("#flag");e.addClass("lyrics_over_flag").css("position","absolute").insertAfter(b);b.resize(function(){var i=b.offset();var g=parseInt(e.css("font-size"));var h=b.width()/35;if(g!=h){e.css("font-size",h);g=h}e.css("top",i.top+b.height()-(g+10)).css("left",i.left).css("width",b.width())});b.resize()}var f=null;for(var d=0;d<this.lyrics.length;d++){var a=this.lyrics[d];if(a.time<c){f=a.lyrics}}if(f==null){}else{if($(this.displayer).text()!=f){$(this.displayer).text(f);$(this.displayer).css("opacity",0).animate({opacity:1},"fast")}}}};var lyricsPlayer;function setupAnthem(){var f=document.createElement("audio");var h=!!(f.canPlayType);lyricsPlayer=new LyricsPlayer();if(h){f.id="anthem";f.controls="controls";f.alt=anthem.alt;f.title=anthem.title;lyricsPlayer.audioTag(f);$(f).insertAfter($("#flag"));if(isYES(f.canPlayType("audio/ogg"))){var l=anthem.ogg}else{var l=anthem.mp3}f.src=l}else{try{var b=new Audio("");if(isYES(b.canPlayType("audio/ogg"))){var l=anthem.ogg}else{var l=anthem.mp3}var a=new Audio(l);a.play()}catch(j){try{var d=document.createElement("object");d.id="anthem";d.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";d.codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0";d.width=165;d.height=37;var k=document.createElement("param");k.name="movie";k.value=anthem.flash;d.appendChild(k);var g=document.createElement("param");g.name="allowScriptAccess";g.value="always";d.appendChild(g);var i=document.createElement("embed");i.src=anthem.flash;i.width=165;i.height=37;i.allowScriptAccess="always";i.type="application/x-shockwave-flash";i.pluginspage="http://www.macromedia.com/go/getflashplayer";d.appendChild(i);$(d).insertAfter($("#flag"))}catch(j){html='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ';html+='id="anthem" ';html+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" ';html+='width="165" height="37">';html+='<param name=movie value="'+anthem.flash+'">';html+='<param name="allowScriptAccess" value="always" />';html+='<embed src="'+anthem.flash+'" width="165" height="37" allowScriptAccess="always" ';html+='type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">';html+="</embed>";html+="</object>";var c=document.createElement("div");c.id="anthem_container";c.innerHTML=html;$(c).insertAfter($("#flag"))}lyricsPlayer.flash()}}}function scaleFlag(d){var c=$("#primary");var b=$("#flag");var f=$(window);var a=b.width();var e=b.height();f.resize(function(){var g=Math.min(e,Math.max(d,f.height()-(c.height()-b.height())));var h=Math.min(a,Math.max(d,f.width()));if(g/e<h/a){h=Math.floor(g/e*a)}else{g=Math.floor(h/a*e)}b.css("width",h).css("height",g);b.resize()});f.resize()}function setupSubscribe(){var b=$("#subscribe_simple");var a=b.width();var c=-1*a;b.css("display","block").css("position","absolute").css("top",0).css("left",c);b.click(function(d){if(d.target.tagName&&d.target.tagName.toLowerCase()=="input"){return}if(parseInt(b.css("left"))!=c){b.animate({left:c},"fast")}else{b.animate({left:0},"fast")}});$(window).scroll(function(){var d=Math.floor(($(window).height()-b.height())/2)+$(window).scrollTop();var e=parseInt(b.css("top"));if(Math.abs(d-e)>100){b.css("top",d)}});$(window).scroll()}function fitContent(){var e=$(window);var f=e.height();var b=f-$("body").height();var c=$("#content");var d=c.height();if(b>0){e.resize(function(){c.css("min-height",d+(e.height()-f)+b)});e.resize()}};